# –í–µ—Ä—Å–∏—è 1.1 (2025-06-15)
# DIANA: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ GitHub Runner –∫ –ø–æ—Ä—Ç—É 22 + –ª–æ–≥ IP –∏ –¥–∞—Ç—ã

name: DIANA: Test SSH Port Access

on:
  workflow_dispatch:

jobs:
  test-ssh-port:
    runs-on: ubuntu-latest

    steps:
      - name: Print date and runner IP
        run: |
          echo "üïí –î–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞: $(date)"
          echo "üåê IP GitHub Runner:"
          curl -s https://ipinfo.io/ip

      - name: Test TCP port 22 to target
        run: |
          echo "üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º ${{ secrets.PROD_HOST }} –Ω–∞ –ø–æ—Ä—Ç 22..."
          timeout 5 bash -c "</dev/tcp/${{ secrets.PROD_HOST }}/22" && echo "‚úÖ –ü–æ—Ä—Ç 22 –æ—Ç–∫—Ä—ã—Ç" || echo "‚ùå –ü–æ—Ä—Ç 22 –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
